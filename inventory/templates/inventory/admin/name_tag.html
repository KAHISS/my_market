<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Imprimir Ofertas - 12 por P√°gina</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700;900&display=swap" rel="stylesheet">
    
    <style>
        /* --- RESET E GERAL --- */
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Roboto', sans-serif;
            background-color: #eee;
        }

        /* --- A FOLHA A4 (AGORA 3x4) --- */
        .folha-a4 {
            background: white;
            width: 210mm;
            height: 297mm;
            margin: 0 auto 20px auto;
            
            display: grid;
            /* MUDAN√áA: 3 Colunas x 4 Linhas = 12 Itens */
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(4, 1fr);
            
            gap: 4mm; 
            padding: 8mm 5mm; 
            box-sizing: border-box;
            
            page-break-after: always;
            break-after: page;
        }

        /* --- O CONTAINER DE CADA ETIQUETA --- */
        .etiqueta-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden; 
        }

        /* --- SVG (Fundo Explos√£o) --- */
        .explosao-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.3));
            object-fit: fill; 
        }

        /* --- BADGE "OFERTA" (Reduzido) --- */
        .oferta-badge {
            position: absolute;
            top: 5px; 
            left: 50%;
            transform: translateX(-50%);
            background-color: #ff0000;
            color: white;
            font-weight: 900;
            /* Fontes reduzidas para caber na etiqueta menor */
            font-size: 14px; 
            text-transform: uppercase;
            padding: 2px 15px;
            border-radius: 50px;
            z-index: 3;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            white-space: nowrap;
        }

        /* --- CONTE√öDO (Texto) --- */
        .etiqueta-conteudo {
            position: relative;
            z-index: 2;
            text-align: center;
            color: #000;
            width: 85%; 
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding-top: 15px; /* Espa√ßo para n√£o bater na badge OFERTA */
        }

        .produto-nome {
            font-size: 16px; /* Reduzido de 24px */
            font-weight: 900;
            line-height: 1.1;
            margin-bottom: 2px;
            text-transform: uppercase;
            max-height: 40px;
            overflow: hidden;
            word-wrap: break-word;
        }

        .preco-container {
            display: flex;
            align-items: baseline;
            justify-content: center;
            margin-top: 0px;
        }

        .moeda {
            font-size: 18px; /* Reduzido de 30px */
            font-weight: 900;
            margin-right: 3px;
        }

        .valor {
            font-size: 52px; /* Reduzido de 90px para caber */
            font-weight: 900;
            line-height: 1;
            letter-spacing: -2px;
            color: #d00000; /* Vermelho escuro para contraste no amarelo */
        }

        /* --- IMPRESS√ÉO --- */
        @media print {
            @page { size: A4; margin: 0mm; }
            body { background: none; padding: 0; margin: 0; }
            .folha-a4 { margin: 0; border: none; box-shadow: none; }
            .no-print { display: none !important; }
            * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
        }
    </style>
</head>
<body>

    <div class="no-print" style="text-align: center; padding: 20px; background: #333; color: white;">
        <button onclick="window.print()" style="padding: 15px 30px; font-size: 20px; cursor: pointer; background: #ffcc00; color: black; font-weight: bold; border: none; border-radius: 5px;">
            üñ®Ô∏è IMPRIMIR 12 POR FOLHA
        </button>
    </div>
    
    {% for product in products %}
        
        {% if forloop.counter0|divisibleby:12 %}
        <div class="folha-a4">
        {% endif %}

            <div class="etiqueta-container">
                <svg class="explosao-bg" viewBox="0 0 400 180" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
                     <path fill="#ffff00" stroke="#ff0000" stroke-width="6" 
                      d="M200,10 L250,40 L360,25 L340,70 L390,85 L340,120 L380,160 L280,155 L290,175 L200,165 L110,175 L120,155 L20,160 L60,120 L10,85 L60,70 L40,25 L150,40 Z"/>
                </svg>

                <div class="oferta-badge">OFERTA</div>

                <div class="etiqueta-conteudo">
                    <div class="produto-nome">{{ product.name|truncatechars:22 }}</div>
                    <div class="preco-container">
                        <span class="moeda">R$</span>
                        <span class="valor">{{ product.stock.sale_price|floatformat:2 }}</span>
                    </div>
                </div>
            </div>

        {% if forloop.counter|divisibleby:12 or forloop.last %}
        </div>
        {% endif %}

    {% endfor %}

</body>
</html>